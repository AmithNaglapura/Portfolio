{\rtf1\ansi\ansicpg1252\cocoartf2822
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
\paperw11900\paperh16840\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f0\fs24 \cf0 exports.handler = async function(event) \{\
    // Only allow POST requests\
    if (event.httpMethod !== 'POST') \{\
        return \{ statusCode: 405, body: 'Method Not Allowed' \};\
    \}\
\
    const \{ question \} = JSON.parse(event.body);\
    const apiKey = process.env.GEMINI_API_KEY; // Get the secret key from Netlify's environment\
\
    if (!apiKey) \{\
        return \{ statusCode: 500, body: 'API key not found.' \};\
    \}\
\
    const context = `\
        Amith Naglapura's Professional Profile:\
        - Summary: A technologist specializing in data analysis, transforming complex data into actionable insights and engineering solutions that bridge hardware and software.\
        - Experience:\
          - Schneider Electric (Intern): Worked on a 'Detecting Current Leakage' system. Developed algorithms to analyze real-time electrical circuit data to enhance safety and detection accuracy.\
          - Unified Mentor (Data Analysis Intern): Utilized Python, Excel, and SQL for data manipulation, visualization, and interpretation. Analyzed datasets to identify trends and present actionable insights.\
        - Key Projects:\
          - Crack Detection In Pipeline: Used advanced sensors (EMAT/UT) and machine learning for accurate crack detection in pipelines.\
          - Early Stage Crop Disease Detection: Published a research paper on this topic. The project involved using drones/satellite imagery and machine learning to detect crop diseases early.\
        - Skills:\
          - Technical: Data Analysis, Machine Learning, Tableau, SQL, Python, Embedded C, C++, R, HTML, CSS.\
          - Professional: Problem Solving, Project Management, Business Analysis, Leadership.\
    `;\
\
    const prompt = `You are a professional AI assistant for Amith Naglapura's portfolio. Your ONLY task is to answer questions based on the provided context about Amith. Do not answer any questions that are not related to this context. If a question is outside the context or is conversational (like 'hello' or 'how are you'), you must politely decline and state that you can only answer questions about Amith's professional profile.\
\
    Context about Amith:\
    ---\
    $\{context\}\
    ---\
\
    Question: "$\{question\}"\
\
    Based only on the context provided, answer the question.`;\
            \
    const payload = \{\
      contents: [\{ role: "user", parts: [\{ text: prompt \}] \}]\
    \};\
\
    const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=$\{apiKey\}`;\
\
    try \{\
        const response = await fetch(apiUrl, \{\
            method: 'POST',\
            headers: \{ 'Content-Type': 'application/json' \},\
            body: JSON.stringify(payload)\
        \});\
\
        if (!response.ok) \{\
            return \{ statusCode: response.status, body: response.statusText \};\
        \}\
\
        const result = await response.json();\
        const aiResponse = result.candidates[0].content.parts[0].text;\
\
        return \{\
            statusCode: 200,\
            body: JSON.stringify(\{ reply: aiResponse \})\
        \};\
\
    \} catch (error) \{\
        return \{ statusCode: 500, body: JSON.stringify(\{ error: error.message \}) \};\
    \}\
\};}